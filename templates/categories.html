{% extends "layout.html" %}

{% block title %}CatÃ©gories{% endblock %}

{% block content %}
<div class="header-with-actions">
    <div>
        <h1>ğŸ“ CatÃ©gories de produits</h1>
        <p class="muted">{{ categories|length }} catÃ©gorie(s) disponible(s)</p>
    </div>
    <a class="btn btn-primary" href="/add_category">â• Nouvelle catÃ©gorie</a>
</div>

<div class="grid">
    {% for cat in categories %}
    <div class="item">
        <div style="display:flex;align-items:center;justify-content:space-between;gap:12px">
            <div style="flex:1">
                <h3 style="margin:0 0 8px 0">{{ cat.name }}</h3>
                <div style="display:flex;gap:8px;flex-wrap:wrap">
                    {% if cat.has_size %}
                        <span class="badge badge-primary">ğŸ“ Taille</span>
                    {% endif %}
                    {% if cat.has_power %}
                        <span class="badge badge-success">âš¡ Puissance</span>
                    {% endif %}
                    {% if cat.has_brand %}
                        <span class="badge badge-info">ğŸ·ï¸ Marque</span>
                    {% endif %}
                    {% if cat.has_model %}
                        <span class="badge badge-warning">ğŸ“¦ ModÃ¨le</span>
                    {% endif %}
                    {% if cat.custom_fields %}
                        {% for field in cat.custom_fields.split(',') %}
                            {% if field.strip() %}
                                {% set field_name = field.strip().split(':')[0] %}
                                <span class="badge badge-secondary">ğŸ”§ {{ field_name }}</span>
                            {% endif %}
                        {% endfor %}
                    {% endif %}
                </div>
            </div>
            <div style="display:flex;gap:8px;align-items:center">
                <a class="btn btn-outline" href="/edit_category/{{ cat.id }}">âœï¸ Modifier</a>
                <form method="POST" action="/delete_category/{{ cat.id }}" onsubmit="return confirm('âš ï¸ Supprimer cette catÃ©gorie et tous ses produits ? Cette action est irrÃ©versible.');">
                    <button type="submit" class="btn btn-danger" style="cursor:pointer">ğŸ—‘ï¸ Supprimer</button>
                </form>
            </div>
        </div>
    </div>
    {% else %}
    <div class="card" style="grid-column:1/-1;text-align:center;padding:48px 24px">
        <p class="muted">Aucune catÃ©gorie crÃ©Ã©e pour le moment</p>
        <a href="/add_category" class="btn btn-primary" style="margin-top:16px">â• CrÃ©er la premiÃ¨re catÃ©gorie</a>
    </div>
    {% endfor %}
</div>
{% endblock %}